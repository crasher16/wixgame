<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>砖拽 转注转 转</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-color: #f0f0f0;
    }

    #gameCanvas {
      position: relative;
      width: 800px;
      height: 600px;
      margin: 50px auto;
      background-color: #333;
      border: 2px solid #000;
    }

    .player {
      position: absolute;
      width: 50px;
      height: 50px;
      background-color: #4CAF50;
      border-radius: 50%;
    }

    .monster {
      position: absolute;
      width: 40px;
      height: 40px;
      background-color: #FF0000;
      border-radius: 50%;
    }
  </style>
</head>

<body>
  <div id="gameCanvas">
    <div class="player" id="player"></div>
  </div>

  <script>
    const player = document.getElementById('player');
    const gameCanvas = document.getElementById('gameCanvas');
    const canvasWidth = gameCanvas.offsetWidth;
    const canvasHeight = gameCanvas.offsetHeight;

    // 拽 转转 砖 砖拽
    let playerX = 50;
    let playerY = 50;
    const playerSpeed = 10;

    // 拽砖 爪转 拽转
    document.addEventListener('keydown', (event) => {
      switch (event.key) {
        case "ArrowUp":
          if (playerY - playerSpeed >= 0) playerY -= playerSpeed;
          break;
        case "ArrowDown":
          if (playerY + playerSpeed + player.offsetHeight <= canvasHeight) playerY += playerSpeed;
          break;
        case "ArrowLeft":
          if (playerX - playerSpeed >= 0) playerX -= playerSpeed;
          break;
        case "ArrowRight":
          if (playerX + playerSpeed + player.offsetWidth <= canvasWidth) playerX += playerSpeed;
          break;
      }
      updatePlayerPosition();
    });

    // 注 拽 转
    function updatePlayerPosition() {
      player.style.left = `${playerX}px`;
      player.style.top = `${playerY}px`;
    }

    // 爪专转 驻爪转
    setInterval(() => {
      const monster = document.createElement('div');
      monster.classList.add('monster');
      const monsterY = Math.random() * (canvasHeight - 40);
      monster.style.left = `${canvasWidth}px`;
      monster.style.top = `${monsterY}px`;
      gameCanvas.appendChild(monster);

      moveMonster(monster);
    }, 2000);

    // 转注转 驻爪转
    function moveMonster(monster) {
      let monsterX = canvasWidth;
      const interval = setInterval(() => {
        monsterX -= 5;
        monster.style.left = `${monsterX}px`;

        // 拽转 转砖转 注 砖拽
        if (checkCollision(player, monster)) {
          clearInterval(interval);
          monster.remove();
          alert("驻爪转 驻注 ! ");
        }

        // 住专转 驻爪转 砖爪 住
        if (monsterX < -40) {
          clearInterval(interval);
          monster.remove();
        }
      }, 50);
    }

    // 拽转 转砖转
    function checkCollision(player, monster) {
      const playerRect = player.getBoundingClientRect();
      const monsterRect = monster.getBoundingClientRect();

      return (
        playerRect.left < monsterRect.right &&
        playerRect.right > monsterRect.left &&
        playerRect.top < monsterRect.bottom &&
        playerRect.bottom > monsterRect.top
      );
    }
  </script>
</body>

</html>